@using SignalRMVCChat.Areas.sysAdmin.Service
@model dynamic

@{
    Layout = null;
}

@{
    var httpBaseUrl = MyGlobal.GetBaseUrl(Request.Url);
}
@{
    string htmlstr = File.ReadAllText(Server.MapPath("~/Content/ClientApp/my-app/build/index.html"));

    string baseUrl = httpBaseUrl+ "/Content/ClientApp/my-app/build/";
    htmlstr = htmlstr.Replace($@"href=""", $@"href=""{baseUrl}");
    htmlstr = htmlstr.Replace($@"src=""", $@"src=""{baseUrl}");

    htmlstr = htmlstr.Replace($@"@websiteToken@", TempData["websiteToken"] as string);
    htmlstr = htmlstr.Replace($@"@port@", Request.Url.Port+"");

    htmlstr = htmlstr.Replace($@"@baseUrl@", Request.Url.Host);

    
}


@if (TempData["err"] != null)
{
    <div class="alert alert-danger">@TempData["err"]</div>
}

        <script src="~/Scripts/jquery-3.3.1.min.js"></script>
        <script src="~/Scripts/jquery.signalR-2.4.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>

<script>
window["$"]= $
</script>

@Html.Raw(htmlstr)